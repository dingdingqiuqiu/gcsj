import{_ as i,c as a,o as n,ae as l}from"./chunks/framework.ChhGBEr5.js";const E=JSON.parse('{"title":"数据库创建时指定位置的问题","description":"","frontmatter":{"title":"数据库创建时指定位置的问题","mathjax":true,"date":"2025-02-27T13:15:45.000Z","tags":null,"categories":null},"headers":[],"relativePath":"笔记/Old/数据库创建时指定位置的问题.md","filePath":"笔记/Old/数据库创建时指定位置的问题.md","lastUpdated":1743185048000}'),h={name:"笔记/Old/数据库创建时指定位置的问题.md"};function p(k,s,t,e,r,d){return n(),a("div",null,s[0]||(s[0]=[l(`<p>本文主要对使用微软SSMS对SQL Serve管理时使用SQL脚本创建数据库时遇到的BUG进行记录，发现数据库文件位置的相关权限问题，在非系统盘创建文件夹作为数据库文件的存放位置即可解决该问题。同时记录SQL Serve和SSMS下载安装配置</p><h3 id="软件下载安装配置" tabindex="-1">软件下载安装配置 <a class="header-anchor" href="#软件下载安装配置" aria-label="Permalink to &quot;软件下载安装配置&quot;">​</a></h3><p><a href="https://help.aliyun.com/document_detail/465370.html" target="_blank" rel="noreferrer">https://help.aliyun.com/document_detail/465370.html</a></p><h3 id="问题描述" tabindex="-1">问题描述 <a class="header-anchor" href="#问题描述" aria-label="Permalink to &quot;问题描述&quot;">​</a></h3><p>执行以下代码时报错：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> master</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sysdatabases </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    select</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;该数据库已存在&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    drop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test123        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--如果该数据库已经存在，那么就删除它</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> database</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test123</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    on</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  primary</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        --表示属于 primary 文件组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cpDB_data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 主数据文件的逻辑名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filename=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;C:\\Program Files\\Microsoft SQL Server\\MSSQL11.MSSQL\\MSSQL\\DATA\\cpDB_data.mdf&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 主数据文件的物理名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        size=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">5mb,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--主数据文件的初始大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        maxsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">100mb,     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 主数据文件增长的最大值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filegrowth=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--主数据文件的增长率</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cpDB_log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 日志文件的逻辑名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filename=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;C:\\Program Files\\Microsoft SQL Server\\MSSQL11.MSSQL\\MSSQL\\DATA\\cpDB_log.ldf&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 日志文件的物理名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        size=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2mb,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--日志文件的初始大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        maxsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20mb,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--日志文件增长的最大值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filegrowth=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1mb        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--日志文件的增长率</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>报错如下：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>消息 5133，级别 16，状态 1，第 11 行 对文件“C:\\Program Files\\Microsoft SQL Server\\MSSQL11.MSSQL\\MSSQL\\DATA\\cpDB_data.mdf”的目录查找失败，出现操作系统错误 3(系统找不到指定的路径。)。 消息 1802，级别 16，状态 1，第 11 行 CREATE DATABASE 失败。无法创建列出的某些文件名。请查看相关错误</span></span></code></pre></div><h3 id="解决方法" tabindex="-1">解决方法 <a class="header-anchor" href="#解决方法" aria-label="Permalink to &quot;解决方法&quot;">​</a></h3><p>在D盘中创建文件夹<code>D:\\1Project\\test</code>后更改代码如下即可解决：</p><div class="language-sql vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">use</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> master</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">go</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> *</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> from</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sysdatabases </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;test123&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    select</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;该数据库已存在&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    drop</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> database</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test123        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--如果该数据库已经存在，那么就删除它</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">else</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">begin</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    create</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> database</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> test123</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    on</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  primary</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        --表示属于 primary 文件组</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cpDB_data&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 主数据文件的逻辑名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filename=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:\\1Project\\test\\cpDB_data.mdf&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 主数据文件的物理名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        size=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">5mb,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--主数据文件的初始大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        maxsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">100mb,     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 主数据文件增长的最大值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filegrowth=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">%        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--主数据文件的增长率</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    log</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> on</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        name=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;cpDB_log&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 日志文件的逻辑名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filename=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;D:\\1Project\\test\\cpDB_log.ldf&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">-- 日志文件的物理名称</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        size=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">2mb,            </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--日志文件的初始大小</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        maxsize</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">20mb,        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--日志文件增长的最大值</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        filegrowth=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">1mb        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">--日志文件的增长率</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><h3 id="ssms附加功能可以管理数据库文件" tabindex="-1">SSMS附加功能可以管理数据库文件 <a class="header-anchor" href="#ssms附加功能可以管理数据库文件" aria-label="Permalink to &quot;SSMS附加功能可以管理数据库文件&quot;">​</a></h3><p>对数据库右键选择<strong>附加</strong>选项即可。</p><p><img src="https://dlink.host/1drv/aHR0cHM6Ly8xZHJ2Lm1zL2kvYy9mYmQ0NGEwNjM2YTQyNDJlL0VUMmNSNWh2ZV9sSnV3NkQzXzZmWU9jQmpmV2VjbkZTMVFFX3NjbURrejBfYmc_ZT1VNDl3M3c.jpg" alt="image-20250227132352857" loading="lazy"></p><p>可以选择数据库文件位置</p><p><img src="https://dlink.host/1drv/aHR0cHM6Ly8xZHJ2Lm1zL2kvYy9mYmQ0NGEwNjM2YTQyNDJlL0VWMW84VDYtbnROSHNTQWpVdEo2ZVFRQmkxTHlPVnd2VnF1Y0pHdGhxVXpmalE_ZT1oM3MwQkc.jpg" alt="image-20250227132503276" loading="lazy"></p>`,16)]))}const y=i(h,[["render",p]]);export{E as __pageData,y as default};
