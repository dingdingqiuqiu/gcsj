import{_ as i,c as a,o as e,ae as t}from"./chunks/framework.ChhGBEr5.js";const r=JSON.parse('{"title":"Blog多平台同步","description":"","frontmatter":{"title":"Blog多平台同步","date":"2023-11-20T22:22:17.000Z","tags":["博客搭建","Git"],"categories":["环境搭建","开发环境"]},"headers":[],"relativePath":"笔记/Old/Blog多平台同步.md","filePath":"笔记/Old/Blog多平台同步.md","lastUpdated":1743185048000}'),n={name:"笔记/Old/Blog多平台同步.md"};function h(p,s,l,d,k,o){return e(),a("div",null,s[0]||(s[0]=[t(`<p>本文主要记录了博客搭建的过程以及如何利用<code>git</code>实现多平台博客同步</p><h3 id="当前配置" tabindex="-1">当前配置 <a class="header-anchor" href="#当前配置" aria-label="Permalink to &quot;当前配置&quot;">​</a></h3><blockquote><p>原理及操作详解： <a href="https://blog.csdn.net/K1052176873/article/details/122879462" target="_blank" rel="noreferrer">先看这个和视频，整懂原理</a></p></blockquote><blockquote><p>博客搭建推荐视频：<a href="https://www.bilibili.com/video/BV1cW411A7Jx/?spm_id_from=333.999.0.0&amp;vd_source=13e2561436a72606df7175a92524fa50" target="_blank" rel="noreferrer">手把手教你搭建属于自己的hexo+github博客</a></p></blockquote><blockquote><p>图床推荐使用Onedrive : <a href="https://www.hortonyyx.com/article/image-bed" target="_blank" rel="noreferrer">图床折腾之旅</a></p></blockquote><blockquote><p>博客迁移原理视频：<a href="https://www.bilibili.com/video/BV13g41147yV/?spm_id_from=333.999.0.0&amp;vd_source=13e2561436a72606df7175a92524fa50" target="_blank" rel="noreferrer">备份和迁移hexo博客</a></p></blockquote><blockquote><p><code>Windows</code>:<code>hexo</code>部署平台所在地，已生成一定量的博客托管在<code>Github</code>上</p></blockquote><blockquote><p><code>Arch</code>:新系统,已有<code>nodejs</code>环境。</p></blockquote><blockquote><p><code>Github</code>：博客托管平台，<code>main</code>为主分支，计划以<code>master</code>分支作为部署文件。</p></blockquote><h3 id="添加标签页和分类页" tabindex="-1">添加标签页和分类页 <a class="header-anchor" href="#添加标签页和分类页" aria-label="Permalink to &quot;添加标签页和分类页&quot;">​</a></h3><p>参考文档：</p><p><a href="https://theme-next.iissnan.com/theme-settings.html" target="_blank" rel="noreferrer">NexT使用官方文档</a></p><p><a href="https://hexo.io/zh-cn/docs/front-matter.html#%E5%88%86%E7%B1%BB%E5%92%8C%E6%A0%87%E7%AD%BE" target="_blank" rel="noreferrer">NexT标签分类页使用官方文档</a></p><p>在<code>next</code>主题的<code>_config.yml</code>配置文件中即可修改</p><p><code>menu</code>部分把<code>tags</code>和<code>categories</code>的注释取消掉</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">menu</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  home</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/ || home</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #about: /about/ || user</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  tags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/tags/ || tags</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  categories</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/categories/ || th</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  archives</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/archives/ || archive</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #schedule: /schedule/ || calendar</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #sitemap: /sitemap.xml || sitemap</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  #commonweal: /404/ || heartbeat</span></span></code></pre></div><p>在<code>hexo-site</code>页面新建<code>tag</code>页面和<code>categories</code>页面</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>hexo new page tags</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">hexo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> new</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> page</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> categories</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your-hexo-site</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source/tags</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.md</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">title:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> tags</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2023-11-24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16:50:27</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;tags&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ../</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> categories</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> index.md</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">title:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> categories</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">date:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 2023-11-24</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 16:52:48</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;categories&quot;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">---</span></span></code></pre></div><h3 id="更改新建文章模板" tabindex="-1">更改新建文章模板 <a class="header-anchor" href="#更改新建文章模板" aria-label="Permalink to &quot;更改新建文章模板&quot;">​</a></h3><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> your-hexo-site</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> scaffolds</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vim</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> post.md</span></span></code></pre></div><div class="language-md vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">md</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">---</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {{ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">title</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {{ </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">date</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }}</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">mathjax</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">tags</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">categories</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">---</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">&lt;!--more--&gt;</span></span></code></pre></div><h3 id="同步原理" tabindex="-1">同步原理 <a class="header-anchor" href="#同步原理" aria-label="Permalink to &quot;同步原理&quot;">​</a></h3><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212674&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1238&amp;height=456" width="1238" height=""><p>更改<code>master</code>分支为默认分支（方便<code>Arch</code>通过<code>git clone</code>获得部署文件)</p><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212640&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1920&amp;height=924" width="1920" height=""><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212639&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1920&amp;height=924" width="1920" height=""><p>选择后点<code>Update</code>即可，最后结果是</p><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212642&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1920&amp;height=924" width="1920" height=""><p>把该分支克隆到本地，进入<code>dingdingqiuqiu.github.io</code>文件夹，可以看到分支为<code>master</code></p><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212644&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1728&amp;height=944" width="1728" height=""><p>删除原分支除<code>.git</code>外的所有文件（这里误删了<code>.git</code>，后面将其恢复了），并将原<code>dingdingqiuqiu</code>文件里除<code>.deploy_git</code>外所有文件移动到<code>dingdingqiuqiu.github.io</code></p><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212646&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1558&amp;height=740" width="1558" height=""><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212648&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1914&amp;height=952" width="1914" height=""><p>安装一些必要插件（可能不是很必要，装上也没啥影响）</p><div class="language-cmd vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">npm install </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">g cnpm </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">registry</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://registry.npm.taobao.org</span></span></code></pre></div><div class="language-cmd vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cnpm install hexo</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">deployer</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">git </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">save</span></span></code></pre></div><blockquote><p>别随便装插件，容易产生依赖问题，报错看着很难受</p></blockquote><blockquote><p>用<code>gitbash</code>中的<code>cnpm</code>安装，用<code>npm</code>安装也会报错</p></blockquote><blockquote><p>然而用<code>cnpm</code>安装以后迁移<code>hexo</code>检测不到安装的模块</p><p>最后还是删除此模块后又用<code>npm</code>安装解决的问题。</p></blockquote><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212650&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1481&amp;height=944" width="1481" height=""><p>最后剩下的文件结构</p><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212652&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1710&amp;height=952" width="1710" height=""><p>注意到这里存在<code>.gitignore</code>文件，如果不存在，创建并写入</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.DS_Store</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Thumbs.db</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">db.json</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.log</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">node_modules/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">public/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">.deploy*/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_multiconfig.yml</span></span></code></pre></div><blockquote><p>注意，如果之前克隆过<code>theme</code>里的主题文件，应该把主题文件中的<code>.git</code>删除，因为<code>git</code>无法嵌套上传（我这里看了下，仅有<code>.github</code>，无<code>.git</code>，因此不必删除<code>.git</code>）</p></blockquote><p>最后将所有更改提交即可</p><div class="language-cmd vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">git </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> .</span></span></code></pre></div><div class="language-cmd vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">git commit </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">m </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;new hexo file&quot;</span></span></code></pre></div><div class="language-cmd vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cmd</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">git push</span></span></code></pre></div><p>提交后看下两个分支，<code>main</code>为静态<code>HTML</code>,<code>master</code>为博客部署文件，符合预期。</p><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212656&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1920&amp;height=924" width="1920" height=""><img src="https://onedrive.live.com/embed?resid=FBD44A0636A4242E%212655&amp;authkey=%21ANiKrfTOh3bHFkY&amp;width=1920&amp;height=924" width="1920" height=""><p>Linux下</p><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> git@github.com:dingdingqiuqiu/dingdingqiuqiu.github.io.git</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#赋予文件夹被修改的权限，不然无法编辑</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 777</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dingdingqiuqiu.github.io.git</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dingdingqiuqiu.github.io</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span></span></code></pre></div><blockquote><p>第一次配置时出了点问题，下面是第二次写的，首先，目录结构应该是这样的：</p></blockquote><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ls                    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_config.landscape.yml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  _config.yml</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  package.json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  package-lock.json</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  scaffolds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  source</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  themes</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pacman</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -S</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> npm</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-deployer-git</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cnpm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-cli</span></span></code></pre></div><blockquote><p><code>-g</code>表示全局用户，这里其实应该用<code>npm</code>的，当时晚高峰，梯子效果不够好，就用了<code>cnpm</code>。</p></blockquote><blockquote><p>开梯子对安装似乎有效果，三次安装只有梯子延迟低的时候装上了</p></blockquote><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">##对post文件进行修改</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">........</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> add</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> .</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> commit</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -m</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Arch&#39;s commit&quot;</span></span></code></pre></div><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span></span></code></pre></div><p>最后，两个平台在写博客之前先同步一下</p><div class="language-zsh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">zsh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pull</span></span></code></pre></div><p>参考文档：</p><p><a href="https://juejin.cn/post/6844903590474022925" target="_blank" rel="noreferrer">Hexo博客多台电脑设备同步管理</a></p><p><a href="https://www.cnblogs.com/shuofxz/p/11736825.html#0-%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF" target="_blank" rel="noreferrer">Hexo多台电脑同步</a></p><h3 id="后续添加的配置" tabindex="-1">后续添加的配置 <a class="header-anchor" href="#后续添加的配置" aria-label="Permalink to &quot;后续添加的配置&quot;">​</a></h3><h4 id="数学公式渲染" tabindex="-1">数学公式渲染 <a class="header-anchor" href="#数学公式渲染" aria-label="Permalink to &quot;数学公式渲染&quot;">​</a></h4><h5 id="第零步-探索" tabindex="-1">第零步：探索 <a class="header-anchor" href="#第零步-探索" aria-label="Permalink to &quot;第零步：探索&quot;">​</a></h5><blockquote><p>参考<a href="https://myblackboxrecorder.com/use-math-in-hexo/" target="_blank" rel="noreferrer">github-hexo渲染数学公式</a>，第0步的内容是根据别的博客进行的尝试，但这个引擎并没有生效，仅做记录用，从第一步往后的步骤有效。</p></blockquote><blockquote><p>以下命令执行均需在<code>dingdingqiuqiu.github.io\\</code>下，因为<code>npm</code>需要安装包到<code>dingdingqiuqiu.github.io\\node_modules</code>下</p></blockquote><p>npm设置代理下载(7890是clash的代理端口,走clash代理)</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>npm config set proxy=http://127.0.0.1:7890</span></span></code></pre></div><p>卸载原有渲染引擎：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-renderer-marked</span></span></code></pre></div><p>下载新的渲染引擎</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-renderer-pandoc</span></span></code></pre></div><p>然后在 <code>dingdingqiuqiu.github.io/themes/hexo-theme-next-7.8.0/_config.yml</code> 中将 <code>mathjax</code> 的 <code>enable</code> 打开。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>math:</span></span>
<span class="line"><span>  ...</span></span>
<span class="line"><span>  mathjax:</span></span>
<span class="line"><span>    enable: true</span></span></code></pre></div><h5 id="第一步-安装mathjax" tabindex="-1">第一步：安装MathJax <a class="header-anchor" href="#第一步-安装mathjax" aria-label="Permalink to &quot;第一步：安装MathJax&quot;">​</a></h5><p>MathJax就是我们用来渲染数学公式的js引擎。</p><p>不过在这之前，我们还需要卸载自带的hexo-math以避免冲突。</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-math</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-renderer-mathjax</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><h5 id="第二步-更新mathjax的cdn链接" tabindex="-1">第二步：更新MathJax的CDN链接 <a class="header-anchor" href="#第二步-更新mathjax的cdn链接" aria-label="Permalink to &quot;第二步：更新MathJax的CDN链接&quot;">​</a></h5><p>由于MathJax官方cdn已停止维护，其他cdn也有如不稳定，必须翻墙等问题，我找到了一个可以使用的cdn地址。</p><p>以下命令显示版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> show</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mathjax</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3.2.2</span></span></code></pre></div><p>打开<code>dingdingqiuqiu.github.io/node_modules/hexo-renderer-mathjax/mathjax.html</code></p><p>将最后一行cdn地址改为（版本可以根据实际情况修改，我根据上述命令得到版本是3.2.2）</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>&lt;script src=&quot;//cdn.bootcss.com/mathjax/3.2.2/MathJax.js?config=TeX-MML-AM_CHTML&quot;&gt;&lt;/script&gt;</span></span></code></pre></div><h5 id="第三步-更换默认渲染引擎" tabindex="-1">第三步：更换默认渲染引擎 <a class="header-anchor" href="#第三步-更换默认渲染引擎" aria-label="Permalink to &quot;第三步：更换默认渲染引擎&quot;">​</a></h5><p>Hexo默认的渲染引擎hexo-renderer-marked对MathJax的支持很不好，我们修改为kramed引擎</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-renderer-marked</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-renderer-kramed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><h5 id="第四步-更改转义规则" tabindex="-1">第四步：更改转义规则 <a class="header-anchor" href="#第四步-更改转义规则" aria-label="Permalink to &quot;第四步：更改转义规则&quot;">​</a></h5><blockquote><p>转义规则原博客作者是错的，这里给出正确的。</p></blockquote><p>因为 hexo 默认的转义规则会将一些字符进行转义，比如 <code>_</code> 转为 <code>&lt;em&gt;</code> ，所以我们需要对默认的规则进行修改。 首先， 打开<code>dingdingqiuqiu.github.io/node_modules/kramed/lib/rules/inline.js</code></p><p>把：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>escape: /^\\\\([\\\\\`*{}\\[\\]()#$+\\-.!_&gt;])/,</span></span></code></pre></div><p>更改为：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>escape: /^\\\\([\`*\\[\\]()#$+\\-.!_&gt;])/,</span></span></code></pre></div><p>把：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>em: /^\\b_((?:__|[\\s\\S])+?)_\\b|^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,</span></span></code></pre></div><p>更改为：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>em: /^\\*((?:\\*\\*|[\\s\\S])+?)\\*(?!\\*)/,</span></span></code></pre></div><h5 id="第五步-使用hexo-filter-mathjax" tabindex="-1">第五步：使用hexo-filter-mathjax <a class="header-anchor" href="#第五步-使用hexo-filter-mathjax" aria-label="Permalink to &quot;第五步：使用hexo-filter-mathjax&quot;">​</a></h5><p>对部分支持<code>MathJax</code>的主题来说，只需在主题配置文件将相关配置项开启即可使用<code>MathJax</code>。但对很多主题，如我使用的<code>CleanBlog</code>主题来说，没有这样的功能。有一个工具可以帮助我们：<a href="https://github.com/next-theme/hexo-filter-mathjax" target="_blank" rel="noreferrer">hexo-filter-mathjax</a>。</p><p>安装：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-filter-mathjax</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><p>对需要开启的博文，在其Front-Matter处增加mathjax: true这一行即可，如：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>---</span></span>
<span class="line"><span>title: On the Electrodynamics of Moving Bodies</span></span>
<span class="line"><span>categories: Physics</span></span>
<span class="line"><span>date: 1905-06-30 12:00:00</span></span>
<span class="line"><span>mathjax: true</span></span>
<span class="line"><span>---</span></span></code></pre></div><p>如果你还想配一些个性化需求，可以在<code>hexo-filter-mathjax</code>的教程中查看。</p><p>这样就大功告成了，写<code>MarkDown</code>的时候正常写数学公式，就可以在生成的博客中展示。</p><h5 id="第六步-修复无法渲染块级公式的bug" tabindex="-1">第六步：修复无法渲染块级公式的BUG <a class="header-anchor" href="#第六步-修复无法渲染块级公式的bug" aria-label="Permalink to &quot;第六步：修复无法渲染块级公式的BUG&quot;">​</a></h5><blockquote><p>当前配置渲染行内公式有效，对于块级公式，仍无法渲染，更换<code>hexo-renderer-marked</code>版本即可。</p><p>参考：<a href="https://blog.csdn.net/weixin_44634312/article/details/120197899" target="_blank" rel="noreferrer">hexo latex 换行 多行公式 终极解决方案</a></p></blockquote><p>更换版本：</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> blog</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> uninstall</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-renderer-marked</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-renderer-marked@1.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><p>编辑<code>dingdingqiuqiu.github.io\\node_modules\\marked\\lib\\marked.js</code></p><p>539行</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>escape: /^\\\\([!&quot;#$%&amp;&#39;()*+,\\-./:;&lt;=&gt;?@\\[\\]\\\\^_\`{|}~])/,</span></span>
<span class="line"><span>改成</span></span>
<span class="line"><span>escape: /^\\\\([!&quot;#$&amp;&#39;()*+,\\-./:;&lt;=&gt;?@\\[\\]^_\`|~])/,</span></span></code></pre></div><p>564行</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>inline._escapes = /\\\\([!&quot;#$%&amp;&#39;()*+,\\-./:;&lt;=&gt;?@\\[\\]\\\\^_\`{|}~])/g;</span></span>
<span class="line"><span>改成</span></span>
<span class="line"><span>inline._escapes = /\\\\([!&quot;#$&amp;&#39;()*+,\\-./:;&lt;=&gt;?@\\[\\]^_\`|~])/g;</span></span></code></pre></div><h4 id="中文目录跳转" tabindex="-1">中文目录跳转 <a class="header-anchor" href="#中文目录跳转" aria-label="Permalink to &quot;中文目录跳转&quot;">​</a></h4><ul><li>在next github 上已经提出了该问题并给出了<a href="https://www.zywvvd.com/pages/go.html?goUrl=https%3A%2F%2Fgithub.com%2Ftheme-next%2Fhexo-theme-next%2Fpull%2F1540%2Ffiles" target="_blank" rel="noreferrer">解决方案</a></li><li>修改<code>dingdingqiuqiu.github.io\\themes\\hexo-theme-next-7.8.0\\source\\js\\utils.js</code>中的以下函数</li></ul><div class="language-javascript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">registerSidebarTOC</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> navItems</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelectorAll</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.post-toc li&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sections</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">navItems].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">map</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">element</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> link </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> element.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;a.nav-link&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getElementById</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">decodeURI</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(link.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getAttribute</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;href&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">replace</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">));</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // TOC item animation navigate.</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    link.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;click&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      event.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">preventDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">();</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">      //var target = document.getElementById(event.currentTarget.getAttribute(&#39;href&#39;).replace(&#39;#&#39;, &#39;&#39;));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">      var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> offset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">getBoundingClientRect</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">().top </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> window.scrollY;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      window.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">anime</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        targets  : document.scrollingElement,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        duration : </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">500</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        easing   : </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;linear&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        scrollTop: offset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">      });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    });</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    //return document.getElementById(link.getAttribute(&#39;href&#39;).replace(&#39;#&#39;, &#39;&#39;));</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> target;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  });</span></span></code></pre></div><h4 id="站内搜索" tabindex="-1">站内搜索 <a class="header-anchor" href="#站内搜索" aria-label="Permalink to &quot;站内搜索&quot;">​</a></h4><blockquote><p>参考这篇:<a href="https://yashuning.github.io/2018/06/29/hexo-Next-%E4%B8%BB%E9%A2%98%E6%B7%BB%E5%8A%A0%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD/" target="_blank" rel="noreferrer">hexoNext主题添加站内搜索</a></p></blockquote><h5 id="插件安装" tabindex="-1">插件安装 <a class="header-anchor" href="#插件安装" aria-label="Permalink to &quot;插件安装&quot;">​</a></h5><p>博客根目录下执行以下代码安装插件</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> npm</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hexo-generator-searchdb</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --save</span></span></code></pre></div><h5 id="配置博客" tabindex="-1">配置博客 <a class="header-anchor" href="#配置博客" aria-label="Permalink to &quot;配置博客&quot;">​</a></h5><p>安装完成，编辑博客配置文件：<code>_config.yml</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>search:</span></span>
<span class="line"><span>  path: search.xml</span></span>
<span class="line"><span>  field: post</span></span>
<span class="line"><span>  format: html</span></span>
<span class="line"><span>  limit: 10000</span></span></code></pre></div><h5 id="配置主题" tabindex="-1">配置主题 <a class="header-anchor" href="#配置主题" aria-label="Permalink to &quot;配置主题&quot;">​</a></h5><p>Next 主题自带搜索设置，编辑主题配置文件：<code>_config.yml</code></p><p>找到文件中 Local search 的相关配置，设为 <code>true</code></p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span># Local search</span></span>
<span class="line"><span>local_search:</span></span>
<span class="line"><span>  enable: true</span></span></code></pre></div><p>hexo 重新部署</p><h3 id="bug-hexo-d失败" tabindex="-1">BUG:hexo d失败 <a class="header-anchor" href="#bug-hexo-d失败" aria-label="Permalink to &quot;BUG:hexo d失败&quot;">​</a></h3><p>梯子换成TUN模式重新尝试即可。</p>`,163)]))}const g=i(n,[["render",h]]);export{r as __pageData,g as default};
