# 球形向量粒子群优化（SPSO）算法简述

## 1. 算法核心思想

SPSO（Spherical Vector-based Particle Swarm Optimization）是一种专为复杂环境下无人机路径规划设计的改进型粒子群优化算法。其核心创新体现在：

- **球形向量表示**：通过将粒子位置和速度限制在球面空间，增强群体多样性并防止过早收敛
- **多维约束融合**：构建复合成本函数，同时优化路径长度、威胁规避、运动平滑性、飞行高度四项指标
- **配置空间搜索**：建立粒子属性与无人机运动学参数（速度、转向角、爬升角）的直接映射关系

## 2. 算法实现框架

### 2.1 粒子编码机制

采用三维球坐标系进行参数化编码：

- **位置编码**：由方位角θ、俯仰角φ和半径 r 组成的三元组 $(θ, φ, r)$
- **速度编码**：使用球面切向量表示速度分量，确保运动方向始终位于球面
- **参数映射**：建立粒子属性与无人机运动学参数的转换关系：
  - 方位角θ ↔ 水平转向角（最大±45°）
  - 俯仰角φ ↔ 爬升/俯冲角（最大±15°）
  - 半径 r ↔ 飞行高度（50m ≤ h ≤ 200m）

### 2.2 复合成本函数

通过加权和形式整合四个优化目标：
$$
    F(X_i) = b_1 F_1 + b_2 F_2 + b_3 F_3 + b_4 F_4
$$
包含：

1. **路径长度成本** $F_1$：欧氏距离累积和
$$
    F_1 = \sum_{j=1}^{n-1} \| \overrightarrow{P_{ij}P_{i,j+1}} \|
$$
2. **威胁规避成本** $F_2$：基于圆柱体威胁模型的分段惩罚
$$
    F_2 = \begin{cases}
    (S+D+R_k) - d_k & \text{if } D+R_k < d_k \leq S+D+R_k \\
    \infty & \text{if } d_k \leq D+R_k
    \end{cases}
$$
3. **运动平滑成本** $F_4$：转弯角和爬升角的二阶差分惩罚
$$
    F_4 = a_1 \sum_{j=1}^{n-2} \phi_{ij} + a_2 \sum_{j=1}^{n-1} |\psi_{ij} - \psi_{i,j-1}|
$$
4. **高度约束成本** $F_3$：硬约束惩罚项
$$
    F_3 = \begin{cases}
    |h_{ij} - \bar{h}| & \text{if } h_{min} \leq h_{ij} \leq h_{max} \\
    \infty & \text{otherwise}
    \end{cases}
$$
### 2.3 更新机制

- **位置更新**：
$$
    x_{k+1}^{ij} \leftarrow (x_k^{ij} + v_{k+1}^{ij}) \mod 2\pi
$$
- **速度更新**：
$$
    v_{k+1}^{ij} \leftarrow w_k v_k^{ij} + \eta_1 r_1 (\ell_k^{ij} - x_k^{ij}) + \eta_2 r_2 (L_g^j - x_k^{ij})
$$
其中：
  - $w_k = w_{max} - \frac{w_{max}-w_{min}}{Iter_{max}} \cdot k$（动态惯性权重）
  - $\eta_1=1.4, \eta_2=1.4$（加速系数）
  - $r_1, r_2 \sim U(0,1)$（随机扰动项）

## 3. 算法特性

### 3.1 搜索效率提升

| 机制           | 实现方式               | 性能提升           |
| -------------- | ---------------------- | ------------------ |
| 球面约束       | 搜索维度降低 30%       | 收敛速度提升 42%   |
| 自适应权重     | 非线性递减惯性权重     | 探索/开发平衡优化  |
| 威胁感知初始化 | 威胁密度场指导粒子分布 | 初始解质量提升 25% |

### 3.2 约束处理机制

| 约束类型     | 处理方式                              | 参数示例        |
| ------------ | ------------------------------------- | --------------- |
| 转向角限制   | 平滑成本函数惩罚（$a_1=1.5$）         | 最大变化率 8°/s |
| 飞行高度范围 | 硬约束 + 软惩罚（$h_{min}=50m$）      | 高度保持精度±2m |
| 威胁规避     | 动态威胁密度场 + 分段惩罚（$S=100m$） | 检测半径 500m   |

## 4. 性能优势

### 4.1 基准测试结果

在 8 个复杂度递增的测试场景中（基于真实 DEM 数据）：

- **收敛速度**：平均迭代次数减少 42%（vs 经典 PSO 的 128 次→74 次）
- **解质量**：成本函数值降低 18-35%（vs θ-PSO 的 23.1→18.5）
- **稳定性**：标准差降低 60%（vs GA 的 3.2→1.3）

### 4.2 实际飞行验证

- **实飞测试**：在三种地形（城市、山地、森林）完成 200+ 架次验证
- **关键指标**：
  - 路径可飞性：100% 满足运动学约束（转向角/爬升率）
  - 威胁规避率：99.2%（检测成功率）
  - 计算效率：平均规划时间<0.8s（i7-11800H @ 2.3GHz）

## 5. 算法扩展性

- **多目标扩展**：通过调整权重系数 $b_k$ 实现任务优先级配置（能源最优→时间最优）
- **动态环境适配**：结合滚动时域策略支持实时障碍物更新（响应延迟<0.5s）
- **多机协同**：通过共享威胁密度场实现多无人机路径协调（支持 10+ 架次协同）
